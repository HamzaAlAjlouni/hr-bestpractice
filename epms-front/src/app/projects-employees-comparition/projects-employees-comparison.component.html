<section class="content">
  <!--Search Area-->
  <div *ngIf="!AddOnFly" class="row">
    <!-- left column -->
    <div class="col-md-12">
      <!-- general form elements -->
      <div class="box box-primary">
        <div class="box-header with-border">
          <h3 class="box-title">{{ GetLocalResourceObject("lblSearch") }}</h3>
        </div>
        <!-- /.box-header -->
        <!-- form start -->
        <form #SearchForm="ngForm">
          <div class="box-body">
            <div class="row">
              <div class="col-xs-2">
                <label>{{ GetLocalResourceObject("lblSearchYear") }}</label>
                <select
                  (change)="ddlYearChange()"
                  [(ngModel)]="ddlSearchYear"
                  class="form-control"
                  id="ddlSearchYear"
                  name="ddlSearchYear"
                  required
                >
                  <option
                    *ngFor="let x of ddlSearchYearsList"
                    value="{{ x.id }}"
                  >
                    {{ x.year }}
                  </option>
                </select>
              </div>
              <div class="col-xs-4">
                <label>{{
                    GetLocalResourceObject("lblSearchStratigicObjective")
                  }}</label>
                <select
                  [(ngModel)]="ddlSearchObjective"
                  class="form-control"
                  id="ddlSearchObjective"
                  name="ddlSearchObjective"
                  required
                >
                  <option value="0">All</option>
                  <option
                    *ngFor="let x of ddlSearchObjectivesList"
                    value="{{ x.id }}"
                  >
                    {{ x.name }}
                  </option>
                </select>
              </div>
              <div class="col-xs-4">
                <label>{{ GetLocalResourceObject("lblSearchUnit") }}</label>
                <select
                  [(ngModel)]="ddlSearchUnit"
                  class="form-control"
                  id="ddlSearchUnit"
                  name="ddlSearchUnit"
                >
                  <option *ngIf="modificationPermission" selected value="-1">
                    {{ GetLocalResourceObject("All") }}
                  </option>
                  <option
                    *ngFor="let x of ddlSearchUnitsList"
                    value="{{ x.ID }}"
                  >
                    {{ x.NAME }}
                  </option>
                </select>
              </div>
              <!--              <div class="col-xs-3">-->
              <!--                <label style="margin-bottom: .8rem;">Quarters</label>-->
              <!--                <div class="row">-->
              <!--                  <div class="col-xs-3">-->
              <!--                    <label><input type="checkbox" name="q1Filter" (change)="filterQ1Changed($event)"-->
              <!--                                  [(ngModel)]="filterQ1" style="margin-top: 0;"> Q1</label>-->

              <!--                  </div>-->
              <!--                  <div class="col-xs-3">-->
              <!--                    <label><input type="checkbox" name="q2Filter" (change)="filterQ2Changed($event)"-->
              <!--                                  [(ngModel)]="filterQ2" style="margin-top: 0;"> Q2</label>-->
              <!--                  </div>-->
              <!--                  <div class="col-xs-3">-->
              <!--                    <label><input type="checkbox" name="q3Filter" (change)="filterQ3Changed($event)"-->
              <!--                                  [(ngModel)]="filterQ3" style="margin-top: 0;"> Q3</label>-->
              <!--                  </div>-->
              <!--                  <div class="col-xs-3">-->
              <!--                    <label><input type="checkbox" name="q4Filter" (change)="filterQ4Changed($event)"-->
              <!--                                  [(ngModel)]="filterQ4" style="margin-top: 0;"> Q4</label>-->
              <!--                  </div>-->
              <!--                </div>-->
              <!--              </div>-->

              <div class="col-xs-2">
                <label>Search</label>
                <button
                  (click)="searchProjectsAssessment()"
                  [disabled]="SearchForm.invalid"
                  class="btn btn-primary form-control"
                >
                  {{ GetLocalResourceObject("btnSearch") }}
                </button>
              </div>
            </div>

          </div>
          <!-- /.box-body -->

        </form>
      </div>
      <!-- /.box -->
    </div>
    <!--/.col (right) -->
  </div>

  <!--  <div class="row" *ngIf="!AddOnFly">-->
  <!--    &lt;!&ndash; left column &ndash;&gt;-->
  <!--    <div class="col-md-12">-->
  <!--      &lt;!&ndash; general form elements &ndash;&gt;-->
  <!--      <div class="box box-primary">-->

  <!--        &lt;!&ndash; /.box-header &ndash;&gt;-->
  <!--        <div *ngIf="showWeight" class="box-body">-->
  <!--          <div class="row ">-->
  <!--            <div class="col-sm-3 col-md-3 col-3">-->
  <!--              <div class="description-block border-right border-bold">-->
  <!--                <h5 class="description-header mb-4">{{ plannedWeight | number: "1.1-2" }}%</h5>-->
  <!--                <br>-->
  <!--                <span class="description-text mt-5">{{ "reviewAndAssesment.plannedWeight" | translate }}</span>-->
  <!--              </div>-->

  <!--            </div>-->

  <!--            <div class="col-sm-3 col-md-3 col-3">-->
  <!--              <div class="description-block border-right border-bold">-->

  <!--                <h5 class="description-header">{{ actualWeight | number: "1.1-2" }}%</h5>-->
  <!--                <br>-->
  <!--                <span class="description-text">{{ "reviewAndAssesment.actualWeight" | translate }}</span>-->
  <!--              </div>-->

  <!--            </div>-->

  <!--            <div class="col-sm-3 col-md-3 col-3">-->
  <!--              <div class="description-block border-right border-bold">-->

  <!--                <h5 class="description-header">{{ successRate | number: "1.1-2" }}%</h5>-->
  <!--                <br>-->
  <!--                <span class="description-text">Progress</span>-->

  <!--              </div>-->

  <!--            </div>-->

  <!--            <div class="col-sm-3 col-md-3 col-3">-->
  <!--              <div class="description-block ">-->

  <!--                <h5 class="description-header">{{ progress | number: "1.1-2" }}%</h5>-->
  <!--                <br>-->
  <!--                <span class="description-text">{{ "reviewAndAssesment.successRate" | translate }}</span>-->

  <!--              </div>-->

  <!--            </div>-->


  <!--          </div>-->
  <!--        </div>-->

  <!--      </div>-->
  <!--      &lt;!&ndash; /.box &ndash;&gt;-->
  <!--    </div>-->
  <!--    &lt;!&ndash;/.col (right) &ndash;&gt;-->
  <!--  </div>-->
  <!--List-->
  <div class="row">
    <div class="col-xs-12">
      <div class="box">
        <div *ngIf="!AddOnFly" class="box-header">
          <h3 class="box-title">
            Project Assessments vs Employee Objective Results
            ({{ projectAssessmentList ? projectAssessmentList.length : 0 }})
          </h3>
        </div>
        <!-- /.box-header -->
        <div
          [(ngModel)]="formRow"
          class="
            box-body
            table-responsive
            no-padding
            table-wrapper-scroll-y"
        >
          <table class="table table-hover table-responsive table-bordered table-striped mb-0">
            <tbody>
            <tr>
              <th class="header-cols">
                {{ GetLocalResourceObject("thProject") }}
              </th>
              <th class="td-col5" style="width: 20%">
                {{ GetLocalResourceObject("lblUnit") }}
              </th>

              <th class="header-cols">
                Project Result
              </th>

              <th class="header-cols">
                Individual Objectives
              </th>
              <th class="header-cols">
                Employee Avg Result
              </th>

              <th class="header-cols">
                Employees vs Project
              </th>


            </tr>
            <tr *ngFor="let x of projectAssessmentList"
                [ngStyle]="
                  x.Style != 'undefind' && x.Style != null && x.Style != ''
                    ? getStyleObj(x.Style)
                    : ''">
              <td style="font-size: 14px" valign="middle">
                {{ x.Name }}
              </td>
              <td class="td-col5" style="font-size: 14px">{{ x.UnitName }}</td>
              <td>
                <div [style.background-color]="getColorHex(x)"
                     style="color:#565050 !important "> {{ getProjectFilteredPercentage(x).toFixed(1) > 120 ? 120 : getProjectFilteredPercentage(x).toFixed(1) }}
                  %
                </div>

              </td>

              <td>
                <table
                  align="center"
                  class="table"
                  style="background-color: bisque"
                >
                  <tbody>
                  <tr>
                    <th>Objective</th>
                    <th>Employee</th>
                    <th>employee Result</th>
                    <th>Action</th>

                  </tr>
                  <tr *ngFor="let y of x.empObjectives; let d = index">
                    <td align="center" class="td-col1">{{ y.name }}</td>
                    <td align="center" class="td-col1">{{ y.name1_1 + " " + y.name1_4 }}</td>
                    <td align="center" class="td-col1">{{ y.Result? y.Result.toFixed(1):y.Result }}</td>
                    <td align="center" class="td-col1">

                      <a target="_blank" href="{{'/#/employeeAssessment?ddlSearchEmp='+y.ID}}">Edit Result</a>

                    </td>


                  </tr>
                  </tbody>
                </table>
              </td>
              <td>
                <div
                  style="color:#565050 !important "> {{x.EmpAvg? x.EmpAvg.toFixed(1):"0" }}
                </div>

              </td>
              <td>
                <div
                  style="color:#565050 !important " [style.background-color]="getBackgroundColor(x)"> {{ getComparisionResult(x).toFixed(1)  }}
                </div>

              </td>
            </tr>
            </tbody>
          </table>
        </div>
        <!-- /.box-body -->
      </div>
    </div>
    <!-- /.col -->
  </div>
</section>
